{"version":3,"sources":["components/AddPersonForm.js","components/Person.js","components/Persons.js","components/Filter.js","services/personsService.js","components/Notification.js","App.js","index.js"],"names":["AddPersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Person","person","handleDelete","name","number","onClick","Persons","persons","newFilter","filter","toUpperCase","match","map","Filter","handleFilterChange","baseUrl","axios","get","then","response","data","newPerson","post","id","delete","put","Notification","message","notificationStyle","color","isError","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","display","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","newMessage","setNewMessage","useEffect","personsService","initialPersons","e","target","preventDefault","some","personOnList","window","confirm","personToUpdate","find","changedPerson","returnedPerson","setTimeout","catch","error","handleUpdate","concat","alert","personToDelete","res","console","log","changedPersons","p","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cf840d2a.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst AddPersonForm = (props) => (\r\n    <div>\r\n        <h2>Add a new</h2>\r\n        <form onSubmit={props.addPerson}>\r\n            <div>\r\n                name: <input value={props.newName} onChange={props.handleNameChange} />\r\n            </div>\r\n            <div>\r\n                number: <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type='submit'>Add</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n)\r\n\r\nexport default AddPersonForm","import React from 'react'\r\n\r\nconst Person = ({ person, handleDelete }) => (\r\n    <li>{person.name} {person.number} <button onClick={() => handleDelete(person)}>delete</button></li>\r\n)\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({ persons, newFilter, handleDelete }) => {\r\n    const nameFilter = (person) => (\r\n        person.name.toUpperCase().match(newFilter.toUpperCase())\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <h2>Numbers</h2>\r\n            <ul>\r\n                {persons.filter(nameFilter).map(person =>\r\n                    <Person key={person.name} person={person} handleDelete={handleDelete} />\r\n                )}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = ({ newFilter, handleFilterChange }) => (\r\n    <p>filter shown with <input value={newFilter} onChange={handleFilterChange} /></p>\r\n)\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst addPerson = newPerson => {\r\n    const request = axios.post(baseUrl, newPerson)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst updatePerson = (id, newNumber) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newNumber)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport default { getAll, addPerson, deletePerson, updatePerson }","import React from 'react'\r\n\r\nconst Notification = ({ message, isError }) => {\r\n    const notificationStyle = {\r\n        color: isError ? 'red' : 'green',\r\n        background: 'lightgrey',\r\n        fontSize: 20,\r\n        borderStyle: 'solid',\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        marginBottom: 10\r\n    }\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div style={notificationStyle}>\r\n            {message.display}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport AddPersonForm from './components/AddPersonForm'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport personsService from './services/personsService'\nimport Notification from './components/Notification'\n\nconst personOnList = (persons, name) => {\n  return persons.some(person => person.name === name)\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [newMessage, setNewMessage] = useState(null)\n\n  const isError = newMessage === null ? null : newMessage.isError\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const handleNewPerson = () => {\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    personsService\n      .addPerson(personObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewMessage(\n          { display: `Added ${returnedPerson.name}`, isError: false }\n        )\n        setTimeout(() => {\n          setNewMessage(null)\n        }, 3000)\n      })\n      .catch(error => {\n        alert('error with adding new person', error)\n      })\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const deletePerson = personToDelete => {\n    const confirm = window.confirm(`Delete ${personToDelete.name} from the list?`)\n    if (confirm) {\n      personsService\n        .deletePerson(personToDelete.id)\n        .then(res => {\n          console.log(res)\n          console.log(res.data)\n          const changedPersons = persons.filter(p => p.id !== personToDelete.id)\n          setPersons(changedPersons)\n          setNewMessage(\n            { display: `Deleted ${personToDelete.name}`, isError: false }\n          )\n          setTimeout(() => {\n            setNewMessage(null)\n          }, 3000)\n        })\n    }\n  }\n\n  const handleUpdate = (name) => {\n    const personToUpdate = persons.find(person => person.name === name)\n    const changedPerson = { ...personToUpdate, number: newNumber }\n\n    personsService\n      .updatePerson(changedPerson.id, changedPerson).then(returnedPerson => {\n        setPersons(persons.map(person => person.id !== personToUpdate.id ? person : returnedPerson))\n        setNewMessage(\n          { display: `Updated number for ${personToUpdate.name}`, isError: false }\n        )\n        setTimeout(() => {\n          setNewMessage(null)\n        }, 3000)\n      })\n      .catch(error => {\n        setNewMessage(\n          { display: `The person ${personToUpdate.name} was already deleted from server`, isError: true }\n        )\n        setTimeout(() => {\n          setNewMessage(null)\n        }, 3000)\n      })\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleAddPerson = (e) => {\n    e.preventDefault()\n\n    if (personOnList(persons, newName)) {\n      const confirmPersonModify = window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`)\n      if (confirmPersonModify) {\n        handleUpdate(newName)\n      }\n    }\n    else {\n      handleNewPerson()\n    }\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleFilterChange = (e) => {\n    setNewFilter(e.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={newMessage} isError={isError} />\n      <Filter\n        newFilter={newFilter}\n        handleFilterChange={handleFilterChange}\n      />\n\n      <AddPersonForm\n        addPerson={handleAddPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <Persons persons={persons} newFilter={newFilter} handleDelete={deletePerson} />\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}